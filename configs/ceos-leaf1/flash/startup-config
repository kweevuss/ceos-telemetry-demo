! Startup-config last modified at Tue Oct  7 01:23:26 2025 by root
! device: ceos-leaf1 (cEOSLab, EOS-4.34.2.1F-43860280.43421F (engineering build))
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$wDGTFL7fFlAZA89Z$K03WVIeComsRQhL6F/jcBuo/uipKyrnccaVB1FTybaITdHdYAx/yGjx4N2xTDBb4bE/GasGZoZ0vMJZrY3yC50
!
management api http-commands
   no shutdown
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname ceos-leaf1
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
vlan 100
   name "ip-vrf-1/vlan-0100/192.168.100.
!
vrf instance ip-vrf-1
!
management api gnmi
   transport grpc default
!
management api netconf
   transport ssh default
!
interface Ethernet1
   description "spine-1"
   no switchport
   ip address 10.0.1.1/31
!
interface Ethernet2
   description "spine2"
   no switchport
   ip address 10.0.2.1/31
!
interface Ethernet10
   switchport trunk allowed vlan 100
   switchport mode trunk
!
interface Loopback0
   ip address 192.168.1.1/32
!
interface Management0
   ip address 172.20.20.6/24
   ipv6 address 3fff:172:20:20::6/64
!
interface Vlan100
   shutdown
   mtu 9164
   vrf ip-vrf-1
   ip address virtual 192.168.100.1/24
!
interface Vxlan1
   vxlan source-interface Loopback0
   vxlan udp-port 4789
   vxlan vlan 100 vni 100
   vxlan vrf ip-vrf-1 vni 2000
!
ip virtual-router mac-address 00:aa:aa:aa:aa:aa
!
ip routing
ip routing vrf ip-vrf-1
!
ip prefix-list loopbacks seq 10 permit 192.168.0.0/16 ge 32
!
ip route 0.0.0.0/0 172.20.20.1
!
ipv6 route ::/0 3fff:172:20:20::1
!
route-map export-loopback permit 10
   match ip address prefix-list loopbacks
!
router bgp 65101
   neighbor evpn peer group
   neighbor evpn remote-as 65000
   neighbor evpn local-as 65000 no-prepend replace-as
   neighbor evpn update-source Loopback0
   neighbor evpn send-community extended
   neighbor spine peer group
   neighbor spine remote-as 65100
   neighbor spine route-map export-loopback out
   neighbor 10.0.1.0 peer group spine
   neighbor 10.0.2.0 peer group spine
   neighbor 192.168.200.1 peer group evpn
   neighbor 192.168.200.2 peer group evpn
   redistribute connected
   !
   vlan 100
      rd 65000:1
      route-target both 65000:100
      redistribute learned
   !
   address-family evpn
      neighbor evpn activate
   !
   address-family ipv4
      no neighbor evpn activate
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
end
